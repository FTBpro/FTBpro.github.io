<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset="utf-8">
<meta name="robots" content="noindex">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<meta content="A Glimps into the challenges that led Minute Media to use a monorepo." name="description">


<link rel="canonical" href="https://tech.minutemedia.com/how-monorepo-is-helping-us-work-better">

<meta name="generator" content="Hugo 0.54.0" />

<link rel="icon" href="/images/mm-favicon.png">

<title>How Using a Monorepo is Helping Us Work Better | Minute Media Tech and Product Blog</title>


<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<link rel="stylesheet" href="https://use.typekit.net/iaf2ktd.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
	crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Righteous%7CMerriweather:300,300i,400,400i,700,700i" rel="stylesheet">



<link rel="stylesheet" href="/css/style.min.b51e072c15eeb480833be3ba1e277039.css">


<meta property="og:title" content="How Using a Monorepo is Helping Us Work Better"/>
<meta property="og:description" content="A Glimps into the challenges that led Minute Media to use a monorepo."/>
<meta property="og:type" content="article"/>

<meta property="og:image" content="https://images2.minutemediacdn.com/image/upload/c_fill,g_auto,h_464,w_825/v1554380923/shape/cover/entertainment/matteo-vistocco-240766-unsplash.jpg"/>                       


    </head>
    <body>
        <div class="blog-wrapper">
<nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top mediumnavigation nav-down">
    <div class="container pr-0">
        
        <a class="navbar-brand" href="https://tech.minutemedia.com//">

            
            <img src="/images/logo-secondary.png" alt="logo">
            
        </a>
        

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarMediumish" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        
        <div class="collapse navbar-collapse" id="navbarMediumish">
            
            <ul class="navbar-nav ml-auto">
                 
                <li class="nav-item ">
                    <a class="nav-link" href="https://www.minutemedia.com/careers">Careers</a>
                </li>
                 
                <li class="nav-item ">
                    <a class="nav-link" href="https://www.minutemedia.com/about-us">About Us</a>
                </li>
                
            </ul>
        </div>
        
    </div>
</nav>


        <div class="site-content">
            <div class="container blog-main-content__wrapper">
    <div class="main-content">
        
        <div class="container  pagewrap">
            <div class="row">
                
                <div class="col-md-2 pl-0"><div class="share">
    <p>Share</p>
    <ul>
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://twitter.com/intent/tweet?text=How%20Using%20a%20Monorepo%20is%20Helping%20Us%20Work%20Better&url=https%3a%2f%2ftech.minutemedia.com%2fhow-monorepo-is-helping-us-work-better" onclick="window.open(this.href, 'twitter-share', 'width=550,height=435');return false;">
        <i class="fab fa-twitter"></i>
        </a>
        </li>
        
        <li class="ml-1 mr-1">
        <a target="_blank" href="https://facebook.com/sharer.php?u=https%3a%2f%2ftech.minutemedia.com%2fhow-monorepo-is-helping-us-work-better" onclick="window.open(this.href, 'facebook-share', 'width=550,height=435');return false;">
        <i class="fab fa-facebook-f"></i>
        </a>
        </li>
        
    </ul>

    
</div></div>
                                
                <div class="col-md-9 flex-first flex-md-unordered">
                    <div class="mainheading">
                        
                        <h1 class="posttitle">How Using a Monorepo is Helping Us Work Better</h1> 
                        	
                        
                        <div class="post-top-meta">
<div class="author-thumb__box">
    <img class="author-thumb" src='/images/users/eddy.jpeg' alt='Eddy K'>
</div>

<div >
    <a target="_blank" class="link-dark">Eddy K</a><br>
    <span class="author-description">
        
        <i class="far fa-star"></i>
        Apr 15, 2019
        <i class="far fa-clock clock"></i>
        4 min read
    </span>					
</div></div>			
                                                
                    </div>

                    
                    
                        <img class="featured-image img-fluid" src="https://images2.minutemediacdn.com/image/upload/c_fill,g_auto,h_464,w_825/v1554380923/shape/cover/entertainment/matteo-vistocco-240766-unsplash.jpg" alt="thumbnail for this post">
                    
                    
                    
                    
                    <div class="article-post">
                        

<p>As any other mature startup moving to its growth stage, Minute Media  had to rebuild its  infrastructure.</p>

<p>Our initial infrastructure was a Monolithic application in Ruby on Rails. Regardless of the technology we chose, the goal was to create tools and company-wide standards. So we  set out to explore.</p>

<p>Our teams work  in a cross-functional organization with clear and sometimes separate business goals. During our exploration, each team ventured out on its own, testing technologies like Node and Go. Few weeks in, we realized we had some communication problems. When we had the opportunity to share our work, we noticed similar technical and design problems arise across teams.</p>

<p>To avoid siloing the teams, solving similar technical problems and doing the same work twice, we tried our new development efforts in a monorepo.</p>

<h4 id="what-is-a-monorepo">What is a monorepo?</h4>

<p>A monorepo is, simply put, a monolithic repository. The idea is to keep all, or most of the projects in the company, in one single repository. The concept is not new and has been in practice for 10 years. Most notably, it’s being used by large companies and corporations such as  Google, Facebook, Twitter, Uber.</p>

<p>After using monmorepo for over a year, I would like to share some of the benefits and lessons we have learned. .</p>

<h4 id="introducing-transparency">Introducing Transparency</h4>

<p>All our codebase is available  to  all team members, but when projects each had their own repos, we rarely found ourselves reviewing the other team’s code.</p>

<p>Now, we  are enabling all team members to review the entire code base. Most of the code is owned by separate teams, so if you are interested in seeing what other teams are doing, you can take a look at  the pull request.</p>

<p> The barrier to doing so is extremely low, since it is just another PR in the repository . In fact,  team members regularly find themselves browsing other teams’ PRs.</p>

<p>This state generates a subconscious thought to create better and more readable code, since your code is in the open, similar to the open source effect.</p>

<h4 id="building-alignment">Building Alignment</h4>

<p>When everything is visible and accessible in a single repo, it is much easier to agree and enforce standards. Every team has its own special standards, but we are trying to align ourselves better . All standards are tested and implemented in each respective team. Once proven useful, all teams move forward and the new standard is implemented across the entire monorepo. Standards we recently implemented:</p>

<ul>
<li>Directory structure for restful services in Go</li>
<li>Switching from Javascript to Typescript</li>
<li>Linting rules for Javascript projects</li>
<li>Documentation formatting</li>
<li>Authentication</li>
<li>Deployment and monitoring</li>
</ul>

<h4 id="sharing-ideas">Sharing Ideas</h4>

<p>We are seeing better cross system architectural designs. This was very hard to spot before, especially for services which  are in separate repositories. Similar functionality is easy to spot and extract. Building an in-house framework to support and increase delivery velocity use it in one service and then apply it. Using one codebase allows participants to spot new or similar ideas. For example, you can use a service that categorises videos according to the transcript, or one that  categorises  news articles as well.</p>

<h4 id="integrating-early">Integrating Early</h4>

<p>Since the whole system is in one repo, writing integration tests and launching the entire system in docker is a breeze. Today, Minute Media  are able to detect integration problems extremely early.</p>

<p>Using docker compose, you can spin up the entire end to end system on your laptop. This enables more elaborate features, like spinning ad hoc QA environments or demos for clients.</p>

<h4 id="allowing-for-simpler-maintenance">Allowing for Simpler Maintenance</h4>

<p>In addition, language upgrades and security patches are applied across all the code at once. Maintaining and updating external dependencies is much simpler, and more accessible than before.</p>

<p>Upgrading from Go 1.10 to 1.11 was done by a single developer over a period of 2-3 days, on 20 different services.</p>

<h4 id="smoothing-corners">Smoothing Corners</h4>

<p>Like everything else in software development, a monorepo requires some discipline. Just like sharing ideas is easy, so is breaking service encapsulation.</p>

<p>Not everybody feels comfortable sharing all the code all the time. Sometimes sharing creates discussion, where there should just be a simple decision.</p>

<p>Furthermore, once the code grows it becomes slower to push/pull requests - which is why we are working towards better integration.</p>

<p>We are still pretty much at the beginning of this experiment. It’s obvious there are many things we need to add to our tool box:</p>

<ul>
<li>List of rules for monorepo</li>
<li>Automated project generation</li>
<li>Template deploy scripts</li>
<li>Pull request templates</li>
<li>Usage of  directed graph build systems, like Bazel or Buck</li>
</ul>

<h4 id="summary">Summary</h4>

<p>There are a lot of technical benefits which can be achieved using a monorepo. With some work, I believe the same technical benefits can be obtained as when using a multi repo.</p>

<p>Most importantly though, introducing a tool generating transparency and alignment is far more important than any technical advantage.</p>

                    </div>
                    
                    
                    <div class="after-post-tags">
                        <ul class="tags">
                        
                        <li>
                        <a href="/tags/pods">pods</a>
                        </li>
                        
                        <li>
                        <a href="/tags/agile">agile</a>
                        </li>
                        
                        <li>
                        <a href="/tags/scrum">scrum</a>
                        </li>
                        
                        <li>
                        <a href="/tags/teams">teams</a>
                        </li>
                        
                        <li>
                        <a href="/tags/cross-functional">cross functional</a>
                        </li>
                        
                        <li>
                        <a href="/tags/process">process</a>
                        </li>
                        
                        <li>
                        <a href="/tags/tools">tools</a>
                        </li>
                        
                        </ul>
                    </div>
                    
                    
                    
                    <div class="row PageNavigation d-flex justify-content-between font-weight-bold">
                    
                        <a class="d-block col-md-6" href="/diy-creating-a-great-relationship-between-dev-and-design"> &laquo; DIY: Creating a Great Relationship Between Dev &amp; Design</a>
                    
                    
                        <a class="d-block col-md-6 text-lg-right" href="/reporting-errors-in-production-the-type-stack-conflict">Reporting Errors in Production: The Type/Stack Conflict &raquo;</a>
                    
                    <div class="clearfix"></div>
                    </div>
                    
                </div>
                
            </div>
        </div>
        
        
    </div>


            </div>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-6 col-sm-6 text-center text-lg-left">
                &copy; Copyright Minute Media - All rights reserved
            </div>
        </div>
    </div>
</footer>

        </div>

    
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>    
    
<script src="/js/techblog.min.bf4ac0cbcff485fae275c79004c52498.js" ></script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-23669758-28', 'auto');
	
	ga('send', 'pageview');
}
</script>

        </div>
    </body>
</html>
